# FINAL REPORT #

## Korte omschrijving ##
Heb jij ook wel eens het gevoel dat je zin hebt om iets te doen, maar eigenlijk geen van je vrienden(groepen) er zin in heeft of dat je zin hebt om iets te doen maar niet weet wat voor leuke activiteiten er in de buurt zijn? Waarnaar je vervolgens toch maar weer die playstation aanzet en in je eentje heel de dag thuis zit te gamen...

Die tijden zijn straks voorbij met de Connect app.
Met de Connect app kan jij gemakkelijk aan activiteiten deelnemen met mensen die in hetzelfde 'schuitje' zitten.
Gebruikers kunnen activiteiten aanmaken waarop andere gebruikers hier aan kunnen deelnemen door te swipen naar rechts.
Heb je dus geen idee wat je wilt doen, geen probleem!, swipe op activiteiten van andere gebruikers.

Gebruikers kunnen elkaars profielen bekijken en op deze manier met elkaar Connecten! Zorg er dus voor dat je een compleet profiel hebt.

## DESIGN ##

### Overzicht ###
De app maakt gebruik van een inlogscherm en signup scherm welk gelinkt zijn aan Firebase Authentication. Wanneer de gebruiker is ingelogd kom je het eerste scherm van de Tab Bar Navigation controller. Er is gekozen voor deze manier van navigeren omdat het de app overzichtelijk maakt en je zo makkelijk kan navigeren tussen de verschillende functies van de applicatie.  

De vier hoofd items zijn:
1. Connect (swipe-scherm)
2. Activities(eigen gemaakte activiteiten en deelnemende activiteiten)
3. Friends (alle gebruikers van Connect voor nu)
4. Profile (gebruiker zijn eigen profiel)

Aan deze vier hoofd items zijn nog verschillende ViewControllers gelinkt welk allen weer een opvolgende functie heeft ten opsichte van de vorige ViewController.

Voor elke ViewController heb ik een aparte file aangemaakt. En naast deze files heb ik 1 file met alle structs die ik gebruikt "Structs.swift", 1 file met alle extensions die ik heb gebruikt "Extension.swift" en nog een extra file voor de custom cell die ik heb gemaakt bijbehorende bij de FriendsViewController genaamd "FriendsViewControllerTableViewCell.swift"

De Connect app maakt gebruik van 4 structs genaamd:
1. User
2. Activity
3. Id
4. Uid (user id)

Deze structs zijn nodig voor het importeren van data vanuit Firebase. Alle structs hebben een init functie snapshot van type DataSnapshot speciaal voor Firebase.
De app maakt gebruik van realtime data vanuit Firebase.

Firebase is ingedeeld in 2 parents, namelijk:
1. "Activities"
    - Child("AutoGeneratedActivityID")
        - Objects
        - Child("participating(uid)")
            - child(AutoID)
                - id

2. "Users"
    - Child("AutoGeneratedUserID")
        - Objects
        - Child("participatingActivities")
            - Child(AutoID)
                - id

### Diepgang ###
In dit stuk gaat elke ViewController beschreven worden, wat de gebruiker ervaart en wat het idee achter de back end is.

#### SigUpViewController: ####
Dit is het eerste scherm dat de gebruiker te zien krijgt. De gebruiker moet hier registeren voor een account met zijn/haar emailadres. Er wordt gecheckt of alle velden worden ingevuld en of er geen andere fouten zijn van de gebruiker. Wanneer dit wel het geval is zal de messagelabel de error aangeven.
Als alles klopt worden de gegevens van de gebruiker naar Firebase Authentication gestuurd, worden de invoer velden gewist en wordt de gebruiker doorgestuurd naar de de ConnectViewController (eerste item van de tab bar controller)
Wanneer een gebruiker al een account heeft kan deze op de "Go to loging screen" button klikken om in te loggen

#### LogInViewController: ####
Hier kan de gebruiker inloggen met een bestaand account. De gebruiker kan zijn/haar email en wachtwoord invoeren waarnaar er gecheckt wordt of deze kloppen met Firebase Authentication. Eventuele error messages worden getoond met behulp van de errorLabel. Als alles klopt wordt de gebruiker ingelogd en doorgestuurd naar de ConnectViewController.

#### ConnectViewController: ####
Welkom! Dit is de meest "belangrijke" ViewController van mijn app.

Er wordt gecheckt op of de gebruiker al zijn profile al heeft geupdate (via Firebase), wanneer dit niet het geval is krijgt de gebruiker een popup message.

Deze ViewController maakt gebruikt van een View (card) welke geswiped kan worden door de gebruiker. Deze View laat elke keer een andere activiteit zien die deze ViewController eenamalig ophaald (observeWithSingleEvent) van Firebase.
Al deze activiteiten worden in de array van custom type Activity gestopt en met behulp van een random functie wordt elke keer een andere activiteit gepresenteerd aan de gebruiker. Wanneer deze dan swiped dan wordt dit betreffende activiteit uit de array verwijderd, waardoor de gebruiker geen activiteiten 2 keer zal zien.
Dankzij animaties aanpassingen en GestureRecognizer functies kan de view(Card) echt geswiped worden van links tot rechts. Een extra is, is dat wanneer de gebruiker naar rechts swiped er een groen duimpje te zien is en wanneer de gebruiker naar links swiped een rood duimpje.

Na elke swipe wordt de View weer gereset en geupdate.
De fotos veranderen door een switch functie die kijkt naar de categorie van de desbetreffende activiteit. Er is gekeken of ik hier niet beter een enum kan gebruiker, maar dat blijkt alleen maar onnodig extra werk te zijn.

Wanneer een gebruiker een activiteit liked, neemt deze automatisch deel aan een activititeit. Dit wordt opgeslagen op 2 plekken in Firebase namelijk bij de User onder de child("participatingActivities") en bij Activities bij de child("participatingU(uid)")

#### ActvitiesViewController: ####
Deze ViewController is ingedeeld in 2 sections, de eerste section geeft alle activititeiten weer die de gebruiker zelf heeft aangemaakt en de teweede sectie alle activiteiten die de gebruiker heeft geliked.
De twee secties worden constant geupdate met realtime vanuit Firebase, welk in een multidimensional array of custom object. 
Ook is er gebruik gemaakt van een navigation controller omdat je vanuit deze ViewController je ook naar de CreateActivityViewController kan gaan en naar de ActivityDetailViewController

Wanneer de gebruiker op deze tab komt fetched de app alle data van Firebase en stopt deze continue in alle variables van custom structs die weer worden gebruikt om de front end up to date te houden. 
Het was belangrijk om elke de variablen elke keer leeg te maken voordat je deze weer gaat updaten, hier had ik in het begin veel problemen mee gehad, aangezien toen veel variablen steeds groter en groter werden en er veel duplicates ontstondenn.

#### CreateActivityViewController ####
In deze viewController kan de gebruiker een activiteit aanmaken. Het is de bedoeling dat alle velden worden ingevuld door de gebruiker, wanneer de gebruiker dit niet doet en de activiteit probeert aan te maken wordt deze gewaarschuwd door een popup message.

Er is gebruikt gemaakt van een scrollview zodat de app genoeg informatie kan verzamelen van de gebruiker. Hier is gelet op dat de textinput altijd zichtbaar is en dat de toetsenbord er niet overheen gaat. 
Vervolgens maakt de gebruiker gebruik van een PickerView om de category te bepalen van de activiteit en een datepicker voor de datum. 
Wanneer de activiteit succesvol is aangemaakt krijgt de gebruiker een popup te zien ook met dat het gelukt is.
Alle data wordt dan realtime opgeslagen in Firebase waarna andere gebruikers op deze activiteit kunnen swipen en deelnemen. 

#### ActivityDetailViewController ####
Wanneer er op een activiteit wordt geklikt in de ActivitiesViewController wordt alle info doorgestuurd naar het volgende scherm de ActivityDetailViewController.
Hier kan de gebruiker alle gegevens zien van de desbetreffende activiteit. 
Omdat ik in de parent "Activities" niet de naam van de organisator heb opgeslagen maar alleen de UID, haalt de app alle gegevens op van de gebruiker van de parent "Users" en toont deze vervolgens op het scherm.
Ook kan de gebruiker zien welke participants er allemaal zijn. Dit gebeurd op een soortgelijke manier als de naam van de creator fetchen. 

#### ProfileViewController ####
Elke gebruiker moet voordat hij gebruik kan maken van de functionaliteiten eerste een profiel aanmaken. Wanneer er nog geen profiel is aangemaakt is deze pagina leeg en staat er "Please update profile" 
Wanneer de profiel wel geupdate is, wordt er van firebase storage de profielfoto opgehaald waarvan de path de uid is opgehaald. En ziet de gebruiker alle andere gegevens van zichzelf die hij heeft opgegeven.
Ook hier is gebruik gemaakt van een navigation controller, want de ViewController hierna is gerelateerd aan deze. 

Als alles de gebruiker al data heeft, wordt deze data meegegeven wanneer er op "Edit" gedrukt wordt.

#### ProfileEditViewController ####
Deze ViewController biedt de gebruiker de mogelijkheid om zijn/haar profiel te updaten. Wanneer er data is meegegven vanuit de vorige ViewController dan wordt dit ingevuld, zodat de gebruiker niet alle data elke keer opnieuw hoeft in te vullen als die maar 1 ding wilt aanpassen. 

Met behulp van een imagePicker kan de gebruiker hier een eigen profielfoto uploaden welke opgeslagen wordt in Firebase Storage. Wanneer de gebruiker aanpassingen heeft verricht wordt en deze wilt opslaan wordt er gecheckt op volledigheid van het invullen van alle velden. Wanneer deze niet volledig is, krijgt de gebruiker een popmessage met een "Attention!" , wanneer alles wel goed is opgeslagen en is geupload naar firebase dan krijgt de gebruiker hier ook een melding van. 

#### FriendsViewController #### 
In deze ViewController is gebruik gemaakt van een tableview waarin de gebruiker alle andere Connect gebruikers kan zien. 
Deze worden weergegeven in een custom cell (FriendsTableCellViewController) met profielfoto en naam. 
De gebruiker kan vervolgens op een gebruiker klikken waarna die naar de FriendsDetailViewController wordt gestuurd. Alle data wordt meegegeven aan de volgende ViewController

#### FriendsDetailViewController ####
Hier komen de gegevens van de desbetreffende gebruiker vervolgens binnen en worden getoond op het scherm.  
Het is belangrijk dat gebruikers een volledig profiel hebben daarom, omdat je anders geen goed beeld hebt van andere gebruikers en deze niet kan Connecten

## Process ##
Waar ik meteen in het begin tegen aan liep was het opstellen van een goede handige database in Firebase.
Omdat ik veel in de cloud doe, moet alles goed opgeslagen worden en weer makkelijk teruggevonden kunnen worden. Dit was ontzettend veel puzzelen maar uiteindelijk heb ik dus voor de 2 parents gekozen en de users en activities zo gescheiden te houden. Maar aangezien ik wilde dat de men kon zien wie aan een activiteit meedoet en ook aan welk activiteit iemand meedoet, moest ik bij het uploaden van de data naar firebase wanneer een activiteit wordt geliked, dit dus op 2 plekken opslaan. Bij Activities en bij Users, dit zorgde ervoor dat ik bijna alles voor elkaar kreeg, behalve dat het dus ontzettend moeilijk is om een activiteit te verwijderen. Want wanneer je de aanmaker bent van de activiteit en deze activiteit toch wilt verwijderen, moet je overal in je database de activiteit verwijderen... dus heb ik uiteindelijk besloten deze functie eruit te halen. 
Ook was het eerst de idee om gebruikers alleen vrienden te laten worden wanneer deze gezamelijk aan een activiteiten deelnamen. Maar ook hier was het te veel data bijhouden en door tijdnood ervoor gekozen om onder de tab Friends alle gebruikers te tonen voor nu. 

Eerst wilde ik ook nog de functie imagepicker toevoegen bij de create activity, maar omdat gebruikers dan misschien fotos van niet de juiste formaat meegeven, heb ik besloten standaard fotos te downloaden gebaseerd op categorie. De swipe functie draait hier voornamelijk op en het is niet mooi als de foto die de gebruiker toevoegd dan niet mooi is. 

Omdat ik de data in verschillende parents opsla was het erg vervelend om die data van de ene parent te linken aan de data van de andere parent, maar uiteindelijk is dit wel allemaal gelukt.

Ook heb ik door tijd nood besloten om niet meer gebruik te maken van de API Uit in Noord Holland. Teveel activiteiten waren outdated en de API was erg lastig aan te roepen. Wel heb ik dit grondig bestudeerd en besproken met de tech assistenten. 

Verder heb ik een aantal slordigheids fouten gemaakt waarna ik vervolgens erg lang mee bezig was. Zoals de tableiiew connecten met de delegate en datasource... Aangezien ik gebruik maakt van een tableview in mijn normale viewcontroller was dit van belang. 

Voor de layout heb ik veel filmpjes online bekeken en andere applicaties, om daar inspiratie uit te halen. Uiteindelijk heb ik de meeste buttons zelf ontworpen in Sketch en vind ik zelf dat het erg goed is gelukt wat betreft lay out. 

Omdat ik veel met optional values werkte heb ik heel veel checks overal moeten neerzetten en ook moeten kijken wanneer ik nou wel iets kan force unwrappen wanneer niet. 

Al bij al erg tevreden over het resultaat, maar er gaat nog heel veel aan gedaan worden. Het uiteindelijk doel is om de app echt uit te brengen.

## Defense ##
Uiteindelijk heb ik geen spijt gehad van mijn keuzes, omdat ik geen gebruik maak van de UIT In noord holland API heb ik mijn app helemaal naar mijn idee kunnen vormen met alle foto's etc. En heb je gewoon altijd activiteiten die actief zijn en goed passen. 
Verder gezien de tijdnood heb ik wat functies eruit gelaten, maar deze wel vervangen door passende oplossingen waardoor de app nog steeds erg gebruiksvriendelijk is. 

## Toekomst ##
Dit is extra, maar ter informatie is het de bedoeling dat ik deze app veel verder ga uitwerken. Het is altijd al een droom geweest om deze app te maken en nu eindelijk is het mij soort van gelukt.
Een paar belangrijke functies die ik nog zeker wil gaan toevoegen is:

1. Chat Functie
2. Vrienden functie
3. Facebook login (gewoon voor het gemak)
4. Delete functie
5. Google Maps locatie API

Verder wil ik eigenlijk nog meer data gaan verzamelen van de gebruikers, zodat ik op lange termijn hier ook statistieken uit kan halen door bijvoorbeeld popuaire activiteits categorien vaker/eerder te laten zien. En of gepersonaliseerde activiteitsvertoning. 

